<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/lib/codemirror.css" rel="stylesheet">
<link rel="icon" href="mingo.png" type="image/png">
<title>Mingo | Software Development Academy</title>

<style>
  /* header */
  /* HEADER STYLING */
header {
  position: sticky;
  top: 0;
  z-index: 1000;
  background: #1d263b;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 18px 50px;
  border-bottom: 1px solid #24307a;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

header .logo {
  font-size: 24px;
  letter-spacing: 3px;
  font-weight: bold;
}

header .header-nav a {
  margin-left: 20px;
  color: #ffffff;
  font-weight: 500;
  font-size: 16px;
  text-decoration: none;
  transition: color 0.3s;
}

header .header-nav a:hover {
  color: orange;
}

header .header-right button {
  background: transparent;
  border: 1px solid orange;
  color: orange;
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s ease;
}

header .header-right button:hover {
  background: orange;
  color: #000;
}

/* Responsive header */
@media (max-width: 768px) {
  header {
    flex-direction: column;
    align-items: flex-start;
    padding: 12px 20px;
  }
  header .header-nav {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
  }
  header .header-right {
    margin-top: 10px;
    width: 100%;
  }
}

/* editor */
body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    height: 100vh;
    display: flex;
    flex-direction: column;
    background-color: #1e1e1e;
    color: #fff;
}

/* Main layout */
#mainContainer { display: flex; flex: 1; }

/* Explorer */
#explorer {
    width: 220px;
    background-color: #252526;
    border-right: 1px solid #333;
    display: flex;
    flex-direction: column;
}
#explorer-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px;
    border-bottom: 1px solid #333;
}
#explorer-header h3 { margin: 0; font-size: 14px; color: #ccc; }
#newFileBtn { background-color: #0078d7; color: #fff; border: none; padding: 2px 6px; font-size: 12px; cursor: pointer; border-radius: 3px; }

.file-container { display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; cursor: pointer; }
.file-container:hover { background-color: rgba(255,255,255,0.1); }
.file-name { flex: 1; }
.delete-file { color: red; margin-left: 5px; cursor: pointer; font-weight: bold; }
.download-file { color: #0a84ff; margin-left: 5px; cursor: pointer; font-weight: bold; }

/* Editor */
#editorContainer { flex: 1; display: flex; flex-direction: column; }
#tabsBar { display: flex; justify-content: space-between; align-items: center; height: 35px; background-color: #333; border-bottom: 1px solid #555; padding: 0 10px; }
#tabs { display: flex; align-items: center; height: 100%; }
.tab { padding: 5px 15px; cursor: pointer; color: #ccc; }
.tab.active { background-color: #1e1e1e; color: #fff; border-top: 2px solid #0078d7; }
#buttons { display: flex; gap: 5px; }
button { background-color: #0a84ff; color: #fff; border: none; padding: 4px 10px; font-size: 13px; cursor: pointer; border-radius: 3px; }

/* Editor */
#editor { flex: 1; }
.CodeMirror { height: 100%; font-size: 14px; }

/* Terminal */
#terminal { height: 150px; background-color: #1e1e1e; color: #0f0; font-family: monospace; padding: 5px; overflow-y: auto; border-top: 1px solid #555; display: none; white-space: pre-wrap;}

/* Settings panel */
#settingsPanel {
    position: fixed;
    top: 50px;
    right: 10px;
    width: 200px;
    background-color: #333;
    border: 1px solid #555;
    padding: 10px;
    display: none;
    z-index: 100;
}
#settingsPanel h4 { margin-top: 0; color: #fff; }
#settingsPanel label { display: block; margin: 5px 0 2px; color: #ccc; font-size: 12px; }
#settingsPanel input, #settingsPanel select { width: 100%; margin-bottom: 8px; }

/* Error highlight */
.cm-error-line {
    background-color: rgba(255,0,0,0.3);
}

/* footer */

/* Allow page to scroll */
html, body {
    height: 100%;
    overflow-y: auto;
}

/* Main content should fill screen but allow scrolling */
#mainContainer {
    flex: 1;
    min-height: calc(100vh - 80px); /* header height */
}

/* Footer naturally appears at bottom on scroll */
.site-footer {
    margin-top: 100px; /* space before footer */
}


/* ahahera */

.site-footer {
  background: linear-gradient(135deg, #0a0f1f, #0d1b2a);
  color: #cfd8dc;
  padding: 60px 20px 20px;
  font-family: "Segoe UI", Arial, sans-serif;
}

.footer-container {
  max-width: 1200px;
  margin: auto;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 40px;
}

.footer-logo {
  font-size: 26px;
  margin-bottom: 15px;
}

.footer-text {
  font-size: 14px;
  line-height: 1.6;
  color: #b0bec5;
}

.footer-column h3 {
  font-size: 18px;
  margin-bottom: 15px;
  color: #ffffff;
}

.footer-column ul {
  list-style: none;
  padding: 0;
}

.footer-column ul li {
  margin-bottom: 10px;
}

.footer-column ul li a,
.footer-column p a {
  color: #b0bec5;
  text-decoration: none;
  font-size: 14px;
  transition: color 0.3s ease;
}

.footer-column ul li a:hover,
.footer-column p a:hover {
  color: orange;
}

.footer-socials {
  margin-top: 15px;
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.footer-socials a {
  font-size: 14px;
  color: orange;
  text-decoration: none;
  border: 1px solid orange;
  padding: 6px 12px;
  border-radius: 6px;
  transition: all 0.3s ease;
}

.footer-socials a:hover {
  background: rgb(241, 190, 94);
  color: #0a0f1f;
}

/* ===== BOTTOM BAR ===== */
.footer-bottom {
  margin-top: 40px;
  padding-top: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  font-size: 13px;
  color: #90a4ae;
}

.footer-legal a {
  color: #90a4ae;
  text-decoration: none;
  margin: 0 6px;
}

.footer-legal a:hover {
  color: rgb(236, 186, 93);
}

/* new */
#editorContainer { flex: 1; display: flex; flex-direction: column; }
#editor { flex: 1; }
.CodeMirror { height: 100%; font-size: 14px; }

#mainContainer {
    display: flex;
    flex: 1;
    height: calc(100vh - 75px); /* Subtract header height */
}

#editorContainer { 
    flex: 1; 
    display: flex; 
    flex-direction: column; 
    min-height: 0; /* allow flex to shrink properly */
}

#editor { 
    flex: 1; 
    min-height: 0; 
}

.CodeMirror { 
    height: 100% !important; /* force editor to fill container */
    font-size: 14px; 
}
header button {
  background: transparent;
  border: 1px solid orange;
  color: orange;
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s;
}

header button:hover {
  background: orange;
  color: #000;
}

</style>
</head>
<body>
  <section>
<header>
  <div class="header-left">
    <h1 class="logo"><span style="color:white">MI</span><span style="color:orange">NGO</span></h1>
  </div>
  <nav class="header-nav">
    <a href="index.html" onclick="show('home')">Home</a>
    <a href="#" onclick="show('hosting')">Hosting</a>
    <a href="coding.html" onclick="show('lab')">Coding Lab</a>
    <a href="ana.html" onclick="show('projects')">Pro-Analysis</a>
    <a href="lass.html" onclick="show('projects')">learn Mingo</a>
  </nav>
<button id="runBtn">Run</button>
</header>
</section>

<!--editor-->
<div id="mainContainer">
    <div id="explorer">
        <div id="explorer-header">
            <h3>EXPLORER</h3>
            <button id="newFileBtn">+ File</button>
        </div>
        <div id="fileList"></div>
    </div>

    <div id="editorContainer">
        <div id="tabsBar">
            <div id="tabs"></div>
            <div id="buttons">
                <button id="terminalBtn">Terminal</button>
                
                <button id="trackErrorsBtn">Track Errors</button>
                <button id="settingsBtn">Settings</button>
            </div>
        </div>
        <textarea id="editor"></textarea>
        <div id="terminal"></div>
    </div>
</div>

<!-- Settings Panel -->
<div id="settingsPanel">
    <h4>Editor Settings</h4>
    <label for="textColor">Text Color</label>
    <input type="color" id="textColor" value="#d4d4d4">
    <label for="bgColor">Background Color</label>
    <input type="color" id="bgColor" value="#1e1e1e">
    <label for="fontSize">Font Size (px)</label>
    <input type="number" id="fontSize" value="14" min="10" max="36">
    <label for="fontFamily">Font Family</label>
    <select id="fontFamily">
        <option value="monospace">Monospace</option>
        <option value="Courier New">Courier New</option>
        <option value="Consolas">Consolas</option>
        <option value="Arial">Arial</option>
    </select>
    <label for="lineNumbers">Show Line Numbers</label>
    <select id="lineNumbers">
        <option value="true" selected>Yes</option>
        <option value="false">No</option>
    </select>
</div>

<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/lib/codemirror.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/mode/javascript/javascript.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/mode/css/css.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/mode/xml/xml.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/mode/htmlmixed/htmlmixed.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/mode/python/python.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/addon/edit/closetag.js"></script>


  <!-- Bottom Bar -->
 <footer class="site-footer">
  <div class="footer-container">

    <!-- Brand / About -->
    <div class="footer-column">
      <h2 class="footer-logo">Mi<span style="color: orange;">ngo</span></h2>
      <p class="footer-text">
        Mingo is a modern software development and hosting platform designed to
        help developers build, learn, and deploy projects with confidence.
      </p>
    </div>

    <!-- Quick Links -->
    <div class="footer-column">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#academy">Academy</a></li>
        <li><a href="#hosting">Hosting</a></li>
        <li><a href="#pricing">Pricing</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </div>

    <!-- Resources -->
    <div class="footer-column">
      <h3>Resources</h3>
      <ul>
        <li><a href="#">Documentation</a></li>
        <li><a href="#">Developer Tools</a></li>
        <li><a href="#">Community</a></li>
        <li><a href="#">Support</a></li>
      </ul>
    </div>

    <!-- Contact -->
    <div class="footer-column">
      <h3>Contact</h3>
      <p>Email: <a href="mailto:kennyselleman@gmail.com">kennyselleman@gmail.com</a></p>
      <p>Phone: +250 794 276 148</p>

      <div class="footer-socials">
        <a href="#" aria-label="Facebook">Facebook</a>
        <a href="#" aria-label="Instagram">Instagram</a>
        <a href="#" aria-label="WhatsApp">WhatsApp</a>
        <a href="https://github.com/" aria-label="GitHub">GitHub</a>
      </div>
    </div>

  </div>

  <!-- Bottom Bar -->
  <div class="footer-bottom">
    <p>© 2025 Mingo Platform. All rights reserved.</p>
    <div class="footer-legal">
      <a href="#">Privacy Policy</a>
      <span>|</span>
      <a href="#">Terms of Service</a>
    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/lib/codemirror.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/mode/javascript/javascript.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/mode/css/css.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/mode/xml/xml.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/mode/htmlmixed/htmlmixed.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/mode/python/python.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.14/addon/edit/closetag.js"></script>

<script>
let files = {};
let openTabs = [];
let currentFile = null;

const fileListDiv = document.getElementById('fileList');
const tabsDiv = document.getElementById('tabs');
const editorTextarea = document.getElementById('editor');
const runBtn = document.getElementById('runBtn');
const terminalBtn = document.getElementById('terminalBtn');
const terminalDiv = document.getElementById('terminal');
const settingsBtn = document.getElementById('settingsBtn');
const settingsPanel = document.getElementById('settingsPanel');
const trackErrorsBtn = document.getElementById('trackErrorsBtn');

const textColorInput = document.getElementById('textColor');
const bgColorInput = document.getElementById('bgColor');
const fontSizeInput = document.getElementById('fontSize');
const fontFamilyInput = document.getElementById('fontFamily');
const lineNumbersInput = document.getElementById('lineNumbers');

const editor = CodeMirror.fromTextArea(editorTextarea, {
    mode: 'htmlmixed',
    theme: 'default',
    lineNumbers: true,
    autoCloseTags: true,
});

// HTML skeleton generator
editor.on('keypress', (cm, event) => {
    if(event.key === '!') {
        const htmlSkeleton = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
</head>
<body>

</body>
</html>`;
        cm.replaceRange(htmlSkeleton, {line:0,ch:0}, {line:cm.lineCount(),ch:0});
        event.preventDefault();
    }
});

// Terminal toggle
terminalBtn.addEventListener('click', () => {
    terminalDiv.style.display = (terminalDiv.style.display==='none') ? 'block':'none';
});

// Settings toggle
settingsBtn.addEventListener('click', () => {
    settingsPanel.style.display = (settingsPanel.style.display==='none') ? 'block':'none';
});

// Apply Settings
function applySettings() {
    editor.getWrapperElement().style.color = textColorInput.value;
    editor.getWrapperElement().style.backgroundColor = bgColorInput.value;
    editor.getWrapperElement().style.fontSize = fontSizeInput.value + "px";
    editor.getWrapperElement().style.fontFamily = fontFamilyInput.value;
    editor.setOption('lineNumbers', lineNumbersInput.value === 'true');
}
[textColorInput,bgColorInput,fontSizeInput,fontFamilyInput,lineNumbersInput].forEach(input=>{
    input.addEventListener('input', applySettings);
});

// CREATE NEW FILE
function createNewFile() {
    let filename = prompt("Enter file name with extension (.html, .css, .js, .py, .json, .txt):");
    if(!filename) return;
    filename = filename.trim();
    if(files[filename]) { alert("File already exists!"); return; }
    if(!/\.(html|css|js|py|json|txt)$/.test(filename)) { alert("Invalid extension!"); return; }
    files[filename] = "";
    addFileToExplorer(filename);
    openFile(filename);
}

// ADD FILE TO EXPLORER
function addFileToExplorer(filename) {
    const container = document.createElement('div');
    container.className = 'file-container';
    
    const nameSpan = document.createElement('span');
    nameSpan.className = 'file-name';
    nameSpan.textContent = filename;
    
    nameSpan.addEventListener('contextmenu', (e)=>{
        e.preventDefault();
        let newName = prompt("Rename file:", filename);
        if(newName && !files[newName]) {
            files[newName] = files[filename];
            delete files[filename];
            nameSpan.textContent = newName;
            if(currentFile === filename) currentFile = newName;
        } else alert("Invalid name or file exists!");
    });
    
    const deleteBtn = document.createElement('span');
    deleteBtn.className = 'delete-file';
    deleteBtn.textContent = 'X';
    deleteBtn.onclick = (e)=>{
        e.stopPropagation();
        if(confirm(`Delete file ${filename}?`)){
            delete files[filename];
            container.remove();
            const tabIndex = openTabs.indexOf(filename);
            if(tabIndex > -1) openTabs.splice(tabIndex,1);
            if(currentFile === filename) currentFile = openTabs[0] || null;
            if(currentFile) editor.setValue(files[currentFile]);
            renderTabs();
        }
    }

    const downloadBtn = document.createElement('span');
    downloadBtn.className = 'download-file';
    downloadBtn.textContent = '⬇';
    downloadBtn.onclick = (e)=>{
        e.stopPropagation();
        if(files[filename]) {
            const blob = new Blob([files[filename]], {type: "text/plain"});
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    }

    container.appendChild(nameSpan);
    container.appendChild(downloadBtn);
    container.appendChild(deleteBtn);
    container.onclick = () => openFile(filename);
    fileListDiv.appendChild(container);
}

// OPEN FILE
function openFile(filename) {
    if(!openTabs.includes(filename)) { openTabs.push(filename); renderTabs(); }
    currentFile = filename;
    editor.setValue(files[filename]);
    setActiveTab(filename);
    if(filename.endsWith('.html')) editor.setOption('mode','htmlmixed');
    else if(filename.endsWith('.css')) editor.setOption('mode','css');
    else if(filename.endsWith('.js')) editor.setOption('mode','javascript');
    else if(filename.endsWith('.py')) editor.setOption('mode','python');
    else editor.setOption('mode','text/plain');
}

// RENDER TABS
function renderTabs() {
    tabsDiv.innerHTML = '';
    openTabs.forEach(file=>{
        const tab = document.createElement('div');
        tab.className = 'tab' + (file === currentFile ? ' active' : '');
        tab.textContent = file;
        tab.onclick = () => openFile(file);
        tabsDiv.appendChild(tab);
    });
}

// SET ACTIVE TAB
function setActiveTab(file) {
    const allTabs = document.querySelectorAll('.tab');
    allTabs.forEach(tab => {
        if(tab.textContent === file) tab.classList.add('active');
        else tab.classList.remove('active');
    });
}

// AUTO SAVE
editor.on('change', () => {
    if(currentFile) files[currentFile] = editor.getValue();
});

// RUN BUTTON: normal browser preview
runBtn.addEventListener('click', ()=>{
    let htmlContent = '';
    let cssContent = '';
    let jsContent = '';
    for(let f in files){
        if(f.endsWith('.html')) { htmlContent = files[f]; break; }
    }
    for(let f in files){
        if(f.endsWith('.css')) cssContent += `<style>${files[f]}</style>`;
        if(f.endsWith('.js')) jsContent += `<script>${files[f]}<\/script>`;
    }
    const outputWindow = window.open('','_blank','width=800,height=600,resizable=yes,scrollbars=yes');
    outputWindow.document.open();
    outputWindow.document.write(htmlContent+cssContent+jsContent);
    outputWindow.document.close();
});

// TERMINAL: execute JS or show Python
terminalBtn.addEventListener('click', ()=>{
    terminalDiv.style.display = 'block';
    terminalDiv.innerHTML = '';
    let jsCode = '';
    let pyCode = '';
    for(let f in files){
        if(f.endsWith('.js')) jsCode += files[f] + '\n';
        if(f.endsWith('.py')) pyCode += files[f] + '\n';
    }
    if(jsCode){
        try {
            const originalConsole = console.log;
            console.log = function(...args){
                terminalDiv.innerHTML += args.join(' ') + '\n';
            }
            eval(jsCode);
            console.log = originalConsole;
        } catch(e) { terminalDiv.innerHTML += 'JS Error: ' + e + '\n'; }
    }
    if(pyCode){
        terminalDiv.innerHTML += '\nPython files detected. Execution requires Python environment.\n';
        terminalDiv.innerHTML += pyCode + '\n';
    }
});

// TRACK ERRORS
function clearErrorMarks() {
    if(editor.errorMarks) editor.errorMarks.forEach(mark => mark.clear());
    editor.errorMarks = [];
}

trackErrorsBtn.addEventListener('click', ()=>{
    if(!currentFile) { alert("No file open!"); return; }
    terminalDiv.style.display = 'block';
    terminalDiv.innerHTML = `Tracking errors in ${currentFile}...\n`;
    clearErrorMarks();
    const code = files[currentFile];

    try {
        if(currentFile.endsWith('.js')) {
            new Function(code);
            terminalDiv.innerHTML += "No JS syntax errors detected.\n";
        } else if(currentFile.endsWith('.html')) {
            const lines = code.split('\n');
            let errors = [];
            let openTagsStack = [];
            lines.forEach((line, idx)=>{
                const tags = line.match(/<([a-z]+)([^<]*)>/gi) || [];
                const closeTags = line.match(/<\/([a-z]+)>/gi) || [];
                tags.forEach(tag=>{
                    const tagName = tag.replace(/<|>|\/|\s.*/g,'');
                    openTagsStack.push({tag: tagName, line: idx});
                });
                closeTags.forEach(tag=>{
                    const tagName = tag.replace(/<\/|>/g,'');
                    let last = openTagsStack.reverse().find(t=>t.tag===tagName);
                    if(last) openTagsStack.splice(openTagsStack.indexOf(last), 1);
                });
            });
            if(openTagsStack.length){
                openTagsStack.forEach(err=>{
                    errors.push(`Unclosed tag <${err.tag}> at line ${err.line+1}`);
                    editor.errorMarks = editor.errorMarks || [];
                    editor.errorMarks.push(editor.markText({line: err.line,ch:0},{line: err.line,ch: lines[err.line].length},{className:'cm-error-line'}));
                });
            }
            if(errors.length) terminalDiv.innerHTML += errors.join("\n") + "\n";
            else terminalDiv.innerHTML += "No HTML errors detected.\n";
        } else if(currentFile.endsWith('.css')) {
            const lines = code.split('\n');
            let errors = [];
            lines.forEach((line, idx)=>{
                line = line.trim();
                if(line && !line.endsWith(';') && !line.endsWith('{') && !line.endsWith('}')){
                    errors.push(`Potential missing ; at line ${idx+1}`);
                    editor.errorMarks = editor.errorMarks || [];
                    editor.errorMarks.push(editor.markText({line: idx,ch:0},{line: idx,ch: line.length},{className:'cm-error-line'}));
                }
            });
            if(errors.length) terminalDiv.innerHTML += errors.join("\n") + "\n";
            else terminalDiv.innerHTML += "No CSS errors detected.\n";
        } else if(currentFile.endsWith('.py')) {
            terminalDiv.innerHTML += "Python syntax check: line numbers not available in browser.\n";
        } else {
            terminalDiv.innerHTML += "No error tracking available for this file type.\n";
        }
    } catch(e) {
        const match = e.stack.match(/<anonymous>:(\d+):(\d+)/);
        let line = 0;
        if(match) line = parseInt(match[1])-1;
        terminalDiv.innerHTML += "JS Error: " + e + "\n";
        editor.errorMarks = editor.errorMarks || [];
        editor.errorMarks.push(editor.markText({line: line,ch:0},{line: line,ch: editor.getLine(line).length},{className:'cm-error-line'}));
    }
});

document.getElementById('newFileBtn').addEventListener('click', createNewFile);
</script>
</body>
</html>
